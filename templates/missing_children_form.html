{% extends "base.html" %}

{% block title %}Report Missing Children | Submit Information About Missing Children{% endblock %}

{% block meta_description %}Report a missing child or submit information about a missing child case. This form is provided in partnership with Missing Children South Africa.{% endblock %}

{% block meta_keywords %}missing children South Africa, report missing child, missing children hotline, missing child information, child safety, missing children alert{% endblock %}

{% block og_title %}Report Missing Children | Submit Information About Missing Children{% endblock %}
{% block og_description %}Report a missing child or submit information about a missing child case with our secure online form. Help us reunite families.{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row mb-4">
        <div class="col-12">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{{ url_for('index') }}">Home</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Missing Children Form</li>
                </ol>
            </nav>
            <h1 class="mb-4">Missing Children Alert Form</h1>
            <div class="alert alert-info">
                <div class="d-flex align-items-center">
                    <i class="fas fa-info-circle me-3 fa-2x"></i>
                    <div>
                        <p class="mb-1"><strong>Emergency Contacts:</strong></p>
                        <p class="mb-0">If this is an emergency, please contact the authorities immediately:</p>
                        <ul class="mb-0 mt-2">
                            <li>Missing Children SA Hotline: <strong>116 000</strong></li>
                            <li>South African Police Service: <strong>08600 10111</strong></li>
                            <li>Emergency Services: <strong>10111</strong></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-8">
            <div class="card mb-4">
                <div class="card-header bg-primary text-white">
                    <h2 class="card-title h5 mb-0">Missing Children Report Form</h2>
                </div>
                <div class="card-body">
                    <form method="post" enctype="multipart/form-data" id="missingChildrenForm">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                        
                        <div class="mb-4">
                            <h3 class="h5 mb-3">Report Type</h3>
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="radio" name="report_type" id="reportTypeMissing" value="missing_child" checked>
                                <label class="form-check-label" for="reportTypeMissing">
                                    Report a Missing Child
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="report_type" id="reportTypeInfo" value="information">
                                <label class="form-check-label" for="reportTypeInfo">
                                    Submit Information About a Missing Child Case
                                </label>
                            </div>
                        </div>
                        
                        <div class="missing-child-section">
                            <h3 class="h5 mb-3">Child's Information</h3>
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <div class="form-group mb-3">
                                        <label for="childFirstName" class="form-label">First Name <span class="text-danger">*</span></label>
                                        <input type="text" class="form-control" id="childFirstName" name="child_first_name" required>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group mb-3">
                                        <label for="childLastName" class="form-label">Last Name <span class="text-danger">*</span></label>
                                        <input type="text" class="form-control" id="childLastName" name="child_last_name" required>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row mb-3">
                                <div class="col-md-4">
                                    <div class="form-group mb-3">
                                        <label for="childAge" class="form-label">Age <span class="text-danger">*</span></label>
                                        <input type="number" class="form-control" id="childAge" name="child_age" min="0" max="18" required>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group mb-3">
                                        <label for="childGender" class="form-label">Gender <span class="text-danger">*</span></label>
                                        <select class="form-select" id="childGender" name="child_gender" required>
                                            <option value="">Select Gender</option>
                                            <option value="male">Male</option>
                                            <option value="female">Female</option>
                                            <option value="other">Other</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group mb-3">
                                        <label for="lastSeenDate" class="form-label">Last Seen Date <span class="text-danger">*</span></label>
                                        <input type="date" class="form-control" id="lastSeenDate" name="last_seen_date" required>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group mb-3">
                                <label for="lastSeenLocation" class="form-label">Last Seen Location <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="lastSeenLocation" name="last_seen_location" placeholder="City, Province" required>
                            </div>
                            
                            <div class="form-group mb-3">
                                <label for="childDescription" class="form-label">Description of Child <span class="text-danger">*</span></label>
                                <textarea class="form-control" id="childDescription" name="child_description" rows="3" placeholder="Physical appearance, clothing worn when last seen, any distinguishing characteristics" required></textarea>
                            </div>
                            
                            <div class="form-group mb-4">
                                <label for="childPhoto" class="form-label">Upload a Recent Photo (if available)</label>
                                <input type="file" class="form-control" id="childPhoto" name="child_photo" accept="image/*">
                                <small class="form-text text-muted">Max file size: 5MB</small>
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <h3 class="h5 mb-3">Your Contact Information</h3>
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <div class="form-group mb-3">
                                        <label for="reporterName" class="form-label">Your Full Name <span class="text-danger">*</span></label>
                                        <input type="text" class="form-control" id="reporterName" name="reporter_name" required>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group mb-3">
                                        <label for="relationship" class="form-label">Relationship to Child <span class="text-danger">*</span></label>
                                        <select class="form-select" id="relationship" name="relationship" required>
                                            <option value="">Select Relationship</option>
                                            <option value="parent">Parent</option>
                                            <option value="guardian">Legal Guardian</option>
                                            <option value="relative">Relative</option>
                                            <option value="caregiver">Caregiver</option>
                                            <option value="authority">Authority</option>
                                            <option value="witness">Witness</option>
                                            <option value="other">Other</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <div class="form-group mb-3">
                                        <label for="email" class="form-label">Email Address <span class="text-danger">*</span></label>
                                        <input type="email" class="form-control" id="email" name="email" required>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group mb-3">
                                        <label for="phone" class="form-label">Phone Number <span class="text-danger">*</span></label>
                                        <input type="tel" class="form-control" id="phone" name="phone" required>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group mb-3">
                                <label for="caseInfo" class="form-label">Additional Information <span class="text-danger">*</span></label>
                                <textarea class="form-control" id="caseInfo" name="case_info" rows="4" placeholder="Please provide any additional details that might help locate the child or information about a missing child case" required></textarea>
                            </div>
                            
                            <div class="form-check mb-4">
                                <input class="form-check-input" type="checkbox" id="policeReported" name="police_reported" value="yes">
                                <label class="form-check-label" for="policeReported">
                                    I have already reported this case to the police
                                </label>
                            </div>
                            
                            <div id="policeReferenceContainer" class="form-group mb-4 d-none">
                                <label for="policeReference" class="form-label">Police Reference Number (if available)</label>
                                <input type="text" class="form-control" id="policeReference" name="police_reference">
                            </div>
                            
                            <div class="form-check mb-4">
                                <input class="form-check-input" type="checkbox" id="confirmAccurate" name="confirm_accurate" value="yes" required>
                                <label class="form-check-label" for="confirmAccurate">
                                    I confirm that the information provided is accurate to the best of my knowledge <span class="text-danger">*</span>
                                </label>
                            </div>
                            
                            <div class="form-check mb-4">
                                <input class="form-check-input" type="checkbox" id="termsConditions" name="terms_conditions" value="yes" required>
                                <label class="form-check-label" for="termsConditions">
                                    I agree to the <a href="/terms" target="_blank">terms and conditions</a> and consent to the information being shared with relevant authorities <span class="text-danger">*</span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary btn-lg">Submit Report</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        
        <div class="col-lg-4">
            <div class="card mb-4">
                <div class="card-header bg-primary text-white">
                    <h3 class="card-title h5 mb-0">Important Information</h3>
                </div>
                <div class="card-body">
                    <h4 class="h6 mb-3">What Happens Next?</h4>
                    <ol class="mb-4">
                        <li class="mb-2">Your report will be reviewed by our team within 24 hours.</li>
                        <li class="mb-2">Information will be shared with Missing Children South Africa and relevant authorities.</li>
                        <li class="mb-2">A case coordinator will contact you for additional information if needed.</li>
                        <li class="mb-2">With your consent, an alert may be issued to help locate the child.</li>
                    </ol>
                    
                    <h4 class="h6 mb-3">Immediate Steps to Take</h4>
                    <ul class="mb-4">
                        <li class="mb-2">Report to your local police station immediately.</li>
                        <li class="mb-2">Contact family members, friends, and the child's school.</li>
                        <li class="mb-2">Check the child's social media accounts if applicable.</li>
                        <li class="mb-2">Gather recent photos and detailed descriptions.</li>
                    </ul>
                    
                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        <strong>Important:</strong> Filing a false report is a criminal offense.
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h3 class="card-title h5 mb-0">Contact Information</h3>
                </div>
                <div class="card-body">
                    <p class="mb-3"><strong>Missing Children South Africa:</strong></p>
                    <ul class="list-unstyled mb-3">
                        <li class="mb-2"><i class="fas fa-phone-alt me-2"></i> Hotline: <strong>116 000</strong></li>
                        <li class="mb-2"><i class="fas fa-envelope me-2"></i> Email: <strong>info@missingchildren.org.za</strong></li>
                        <li class="mb-2"><i class="fas fa-globe me-2"></i> Website: <a href="https://www.missingchildren.org.za" target="_blank" rel="noopener noreferrer">www.missingchildren.org.za</a></li>
                    </ul>
                    
                    <p class="mb-3"><strong>South African Police Service:</strong></p>
                    <ul class="list-unstyled">
                        <li class="mb-2"><i class="fas fa-phone-alt me-2"></i> Emergency: <strong>10111</strong></li>
                        <li class="mb-2"><i class="fas fa-phone-alt me-2"></i> Crime Stop: <strong>08600 10111</strong></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Toggle police reference field
        const policeReported = document.getElementById('policeReported');
        const policeReferenceContainer = document.getElementById('policeReferenceContainer');
        
        policeReported.addEventListener('change', function() {
            if (this.checked) {
                policeReferenceContainer.classList.remove('d-none');
            } else {
                policeReferenceContainer.classList.add('d-none');
            }
        });
        
        // Toggle report type sections
        const reportTypeMissing = document.getElementById('reportTypeMissing');
        const reportTypeInfo = document.getElementById('reportTypeInfo');
        const missingChildSection = document.querySelector('.missing-child-section');
        
        function toggleSections() {
            if (reportTypeMissing.checked) {
                missingChildSection.style.display = 'block';
                document.querySelectorAll('.missing-child-section input, .missing-child-section select, .missing-child-section textarea').forEach(el => {
                    if (el.hasAttribute('required-field')) {
                        el.setAttribute('required', '');
                        el.removeAttribute('required-field');
                    }
                });
            } else {
                missingChildSection.style.display = 'none';
                document.querySelectorAll('.missing-child-section input[required], .missing-child-section select[required], .missing-child-section textarea[required]').forEach(el => {
                    el.removeAttribute('required');
                    el.setAttribute('required-field', '');
                });
            }
        }
        
        reportTypeMissing.addEventListener('change', toggleSections);
        reportTypeInfo.addEventListener('change', toggleSections);
        
        // Form validation
        const form = document.getElementById('missingChildrenForm');
        
        form.addEventListener('submit', function(event) {
            event.preventDefault();
            
            // Simulate form submission (in a real implementation, this would submit to the server)
            alert('Thank you for your submission. Your report has been received and will be processed as soon as possible.');
            form.reset();
            
            // In a real implementation, you would submit the form data to the server here
            // For this example, we're just showing an alert and resetting the form
        });
    });
</script>
{% endblock %}