{% extends "base.html" %}

{% block title %}Scan Results - Snap Lotto{% endblock %}

{% block styles %}
<style>
    .result-panel {
        background-color: #f8f9fa;
        border-radius: 5px;
        padding: 15px;
        margin-bottom: 20px;
    }
    .result-title {
        font-size: 18px;
        font-weight: bold;
        margin-bottom: 10px;
        color: #2c3e50;
    }
    .result-numbers {
        display: flex;
        flex-wrap: wrap;
        margin: 15px 0;
    }
    .number-ball {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background-color: #e74c3c;
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 10px;
        margin-bottom: 10px;
        font-weight: bold;
    }
    .number-ball.matched {
        background-color: #27ae60;
        animation: pulse 1.5s infinite;
    }
    .bonus-ball {
        background-color: #f39c12;
    }
    .match-summary {
        background-color: #e8f4fc;
        border-radius: 5px;
        padding: 15px;
        margin-top: 20px;
    }
    .prize-info {
        background-color: #27ae60;
        color: white;
        padding: 15px;
        border-radius: 5px;
        margin-top: 20px;
        text-align: center;
    }
    .prize-amount {
        font-size: 24px;
        font-weight: bold;
        margin: 10px 0;
    }
    .info-box {
        background-color: #f8f9fa;
        border-left: 4px solid #3498db;
        padding: 15px;
        margin: 15px 0;
    }
    .details-table {
        width: 100%;
        border-collapse: collapse;
        margin: 15px 0;
    }
    .details-table th, .details-table td {
        padding: 10px;
        border-bottom: 1px solid #eee;
        text-align: left;
    }
    .details-table th {
        background-color: #f8f9fa;
    }
    @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.1); }
        100% { transform: scale(1); }
    }
</style>
{% endblock %}

{% block content %}
<div class="container">
    <div class="row">
        <div class="col-md-12">
            <h1 class="mb-4">Ticket Scan Results</h1>
            <p class="lead">Here are the results of your lottery ticket scan:</p>
            
            <div class="card">
                <div class="card-body">
                    <div class="result-panel">
                        <div class="result-title">Your Ticket Information</div>
                        <table class="details-table">
                            <tr>
                                <th>Lottery Type:</th>
                                <td>{{ result.ticket_data.lottery_type }}</td>
                            </tr>
                            <tr>
                                <th>Draw Number:</th>
                                <td>{{ result.ticket_data.draw_number }}</td>
                            </tr>
                            <tr>
                                <th>Draw Date:</th>
                                <td>{{ result.ticket_data.draw_date }}</td>
                            </tr>
                        </table>
                        
                        <div class="result-title">Your Numbers</div>
                        <div class="result-numbers">
                            {% for number in result.ticket_data.ticket_numbers %}
                            <div class="number-ball {% if number in result.winning_data.winning_numbers %}matched{% endif %}">{{ number }}</div>
                            {% endfor %}
                            
                            {% if result.ticket_data.bonus_number %}
                            <div class="number-ball bonus-ball {% if result.ticket_data.bonus_number == result.winning_data.bonus_number %}matched{% endif %}">{{ result.ticket_data.bonus_number }}</div>
                            {% endif %}
                        </div>
                    </div>
                    
                    <div class="result-panel">
                        <div class="result-title">Winning Numbers</div>
                        <table class="details-table">
                            <tr>
                                <th>Lottery Type:</th>
                                <td>{{ result.winning_data.lottery_type }}</td>
                            </tr>
                            <tr>
                                <th>Draw Number:</th>
                                <td>{{ result.winning_data.draw_number }}</td>
                            </tr>
                            <tr>
                                <th>Draw Date:</th>
                                <td>{{ result.winning_data.draw_date }}</td>
                            </tr>
                        </table>
                        
                        <div class="result-numbers">
                            {% for number in result.winning_data.winning_numbers %}
                            <div class="number-ball {% if number in result.ticket_data.ticket_numbers %}matched{% endif %}">{{ number }}</div>
                            {% endfor %}
                            
                            {% if result.winning_data.bonus_number %}
                            <div class="number-ball bonus-ball {% if result.winning_data.bonus_number == result.ticket_data.bonus_number %}matched{% endif %}">{{ result.winning_data.bonus_number }}</div>
                            {% endif %}
                        </div>
                    </div>
                    
                    <div class="match-summary">
                        <div class="result-title">Match Summary</div>
                        <p>You matched <strong>{{ result.matches }}</strong> numbers 
                        {% if result.bonus_matched %}and the bonus number{% endif %}.</p>
                        
                        {% if result.matches >= 3 or result.bonus_matched %}
                        <div class="prize-info">
                            <h3>Congratulations! You've Won!</h3>
                            <div class="prize-amount">{{ result.estimated_prize }}</div>
                            <p>Prize Tier: {{ result.prize_tier }}</p>
                        </div>
                        {% else %}
                        <div class="info-box">
                            <p>Sorry, you need to match at least 3 numbers to win a prize.</p>
                        </div>
                        {% endif %}
                    </div>
                    
                    <div class="text-center mt-4">
                        <a href="{{ url_for('scanner.scan_ticket') }}" class="btn btn-primary btn-lg">Scan Another Ticket</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}