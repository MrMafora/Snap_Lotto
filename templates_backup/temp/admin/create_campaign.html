{% extends "base.html" %}

{% block title %}Create Campaign | Snap Lotto{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>
            <i class="fas fa-folder-plus me-2"></i> Create Campaign
        </h1>
        <div>
            <a href="{{ url_for('ad_management.manage_campaigns') }}" class="btn btn-outline-secondary">
                <i class="fas fa-arrow-left me-2"></i> Back to Campaigns
            </a>
        </div>
    </div>
    
    <div class="card shadow-sm">
        <div class="card-body">
            <form action="{{ url_for('ad_management.create_campaign') }}" method="post">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                
                <div class="row">
                    <div class="col-md-6">
                        <!-- Basic Information -->
                        <h5 class="mb-3">Campaign Information</h5>
                        
                        <div class="mb-3">
                            <label for="name" class="form-label">Campaign Name <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="name" name="name" required>
                        </div>
                        
                        <div class="mb-3">
                            <label for="description" class="form-label">Description</label>
                            <textarea class="form-control" id="description" name="description" rows="3"></textarea>
                            <div class="form-text">A brief description of the campaign's purpose or goals</div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="budget" class="form-label">Budget</label>
                            <div class="input-group">
                                <span class="input-group-text">$</span>
                                <input type="number" class="form-control" id="budget" name="budget" min="0" step="0.01">
                            </div>
                            <div class="form-text">Optional: set a budget for this campaign</div>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <!-- Schedule -->
                        <h5 class="mb-3">Campaign Schedule</h5>
                        
                        <div class="mb-3">
                            <label for="start_date" class="form-label">Start Date</label>
                            <input type="date" class="form-control" id="start_date" name="start_date">
                            <div class="form-text">When to start showing ads from this campaign</div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="end_date" class="form-label">End Date</label>
                            <input type="date" class="form-control" id="end_date" name="end_date">
                            <div class="form-text">When to stop showing ads from this campaign</div>
                        </div>
                        
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="active" name="active" checked>
                            <label class="form-check-label" for="active">Active</label>
                            <div class="form-text">Uncheck to create the campaign as inactive (draft mode)</div>
                        </div>
                    </div>
                </div>
                
                <!-- Additional Options (collapsible) -->
                <div class="mb-4 mt-3">
                    <a class="btn btn-outline-secondary mb-3" data-bs-toggle="collapse" href="#advancedOptions" role="button" aria-expanded="false" aria-controls="advancedOptions">
                        <i class="fas fa-cog me-2"></i> Advanced Options
                    </a>
                    
                    <div class="collapse" id="advancedOptions">
                        <div class="card card-body bg-light">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="target_impressions" class="form-label">Target Impressions</label>
                                        <input type="number" class="form-control" id="target_impressions" name="target_impressions" min="100">
                                        <div class="form-text">Set a target impression goal for this campaign</div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="target_ctr" class="form-label">Target CTR (%)</label>
                                        <input type="number" class="form-control" id="target_ctr" name="target_ctr" min="0" max="100" step="0.01">
                                        <div class="form-text">Set a target click-through rate for this campaign</div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="priority" class="form-label">Priority (1-10)</label>
                                        <input type="number" class="form-control" id="priority" name="priority" min="1" max="10" value="5">
                                        <div class="form-text">Higher numbers mean higher priority when multiple campaigns are active</div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="tags" class="form-label">Tags</label>
                                        <input type="text" class="form-control" id="tags" name="tags">
                                        <div class="form-text">Comma-separated tags for filtering and organizing campaigns</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="text-end">
                    <button type="button" class="btn btn-outline-secondary me-2" onclick="window.location.href='{{ url_for('ad_management.manage_campaigns') }}'">Cancel</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save me-2"></i> Create Campaign
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Campaign Types Card -->
    <div class="card shadow-sm mt-4">
        <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold">Campaign Types & Best Practices</h6>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-lg-4 mb-4">
                    <div class="card h-100">
                        <div class="card-header bg-primary text-white">
                            <h6 class="mb-0"><i class="fas fa-bullhorn me-2"></i> Awareness Campaigns</h6>
                        </div>
                        <div class="card-body">
                            <p class="card-text">Focus on reaching as many users as possible to build brand recognition.</p>
                            <ul class="mb-0">
                                <li>Set broader targeting</li>
                                <li>Prioritize visual appeal</li>
                                <li>Focus on impression metrics</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 mb-4">
                    <div class="card h-100">
                        <div class="card-header bg-success text-white">
                            <h6 class="mb-0"><i class="fas fa-mouse-pointer me-2"></i> Engagement Campaigns</h6>
                        </div>
                        <div class="card-body">
                            <p class="card-text">Designed to get users to interact with your content.</p>
                            <ul class="mb-0">
                                <li>Include clear calls-to-action</li>
                                <li>Use interactive elements</li>
                                <li>Monitor click-through rates</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 mb-4">
                    <div class="card h-100">
                        <div class="card-header bg-info text-white">
                            <h6 class="mb-0"><i class="fas fa-flask me-2"></i> Testing Campaigns</h6>
                        </div>
                        <div class="card-body">
                            <p class="card-text">Evaluate different ad variations to optimize performance.</p>
                            <ul class="mb-0">
                                <li>Create A/B tests</li>
                                <li>Change only one variable at a time</li>
                                <li>Use data to inform future campaigns</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script>
    // Handle date validation
    const startDateInput = document.getElementById('start_date');
    const endDateInput = document.getElementById('end_date');
    
    endDateInput.addEventListener('change', function() {
        const startDate = new Date(startDateInput.value);
        const endDate = new Date(endDateInput.value);
        
        if (startDate > endDate) {
            alert('End date cannot be earlier than start date');
            endDateInput.value = '';
        }
    });
    
    startDateInput.addEventListener('change', function() {
        if (endDateInput.value) {
            const startDate = new Date(startDateInput.value);
            const endDate = new Date(endDateInput.value);
            
            if (startDate > endDate) {
                alert('End date cannot be earlier than start date');
                endDateInput.value = '';
            }
        }
    });
</script>
{% endblock %}